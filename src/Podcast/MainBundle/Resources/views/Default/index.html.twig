{% extends 'PodcastMainBundle::layout.html.twig' %}

{% block title %}Podcast Tool{% endblock %}

{% block content %}

<div class="row-fluid">
    <div class="span2 sideBar">
        <ul>
            <li data-link="home"><figure><i class='icon-home'></i> <div class='menuText'>Home</div></figure></li>
            <li data-link="directory" class="active"><figure><i class="icon-th-large"></i> <div class="menuText">Directory</div></figure></li>
        </ul>
    </div>
    <div class="span10 content borBox">
        <div data-bind="template: { name: active().template(), data: active() }"></div>
        
    <script type="text/html" id="view-podcast-finder">
        <div class='row-fluid'>
            <div class="span8" data-bind="with: organizations">
                <div class='page-header'>
                    <h2 class='hBig'>Organization
                        <small class="pull-right" style="cursor: pointer" data-bind="click: $parent.clearSelected">Clear</small>
                    </h2>
                </div>
                <ul class="nav nav-stacked nav-pills" data-bind="foreach: $data" style="height: 200px; overflow: auto; padding: 5px;">
                    <li data-bind="css: { active: selected }"><a href="#" data-bind="text: name, click: $parents[1].toggleItem, attr: { href: Routing.generate('get_organization', { slug: slug }) }"></a></li>
                </ul>
            </div>
            <div class="span4" data-bind="with: categories">
                <div class='page-header'>
                    <h2 class='hBig'>Category
                        <small class="pull-right" style="cursor: pointer" data-bind="click: $parent.clearSelected">Clear</small>
                    </h2>
                </div>       
                <ul class="nav nav-stacked nav-pills" data-bind="foreach: $data" style="height: 200px; overflow: auto; padding: 5px;">
                      <li data-bind="css: { active: selected }"><a href="#" data-bind="text: name, click: $parents[1].toggleItem, attr: { href: Routing.generate('get_category', { slug: slug }) }"></a></li>
                </ul>
            </div>
        </div>

        <div class='page-header'>
            <h1 class='hBig'>Podcasts

            </h1>
                <ul class="nav nav-tabs" data-bind="foreach: sorts">
                    <li class="pull-right" data-bind="css: { active: ( $data == $parent.sort() ) }">
                        <a href="#" data-bind="click: $parent.sort"><!-- ko text: name --><!-- /ko --></a>
                    </li>
                </ul>
        </div>

        <div class='row-fluid gallery photo' data-bind="foreach: podcasts">
            <figure class='tile'>
                <a data-bind="attr: { href: Routing.generate('get_podcast', { slug: slug }) }">
                    <img data-bind="attr: { alt: name, src: image }">
                </a>
            </figure>
        </div>
         
        <div class="row-fluid">
            <div class="span12">
                <div class="pagination pagination-centered">
                    <ul data-bind="foreach: ko.utils.range(1, maxPageIndex)">
                        <li data-bind="css: { active: ($data) == $parent.page() }">
                            <a href="#" data-bind="text: $data, attr: { href: $parent.getLinkForPage($data) }, click: $parent.page"></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        </script>
        <script id="view-podcast" type="text/html">
            <div data-bind="with: podcast">
                <div class="page-header">
                    <h1 class="hBig"><!-- ko text: name --><!-- /ko -->
                        <small>Episodes</small>
                    </h1>


                </div>


                <div class="row-fluid">
                    <div class="span8 blogContent" data-bind="foreach: episodes">
                        <div class="row-fluid blogPost">
                            <div class="title">
                                <blockquote>
                                    <p data-bind="text: name"></p>
                                    <small> <!-- ko text: pub_date --><!-- /ko --> | <!-- ko text: length --><!-- /ko --> </small>
                                </blockquote>
                            </div>
                            <div class="blogContent">
                                <p data-bind="html: description">
                                </p>
                                <p>
                                    <a href="#" data-bind="attr: { href: link }, text: link"></a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="span4 blogSide">
                        <div>
                            <img style="width:100%; height: auto; border: 1px solid #D2D2D2, max-width: 300px;" data-bind="attr: { src: image }">
                        </div>
                        <hr>
                        <div class="tags">
                            <h6>Categories</h6>
                            <ul class="unstyled" data-bind="foreach: categories">
                                <li>
                                    <a data-bind="text: name, attr: { href: Routing.generate('get_category', { slug: slug }) }" style="color: white"></a>
                                </li>
                            </ul>
                            <h6>Organizations</h6>
                            <ul class="unstyled" data-bind="foreach: organizations">
                                <li>
                                    <a data-bind="text: name, attr: { href: Routing.generate('get_organization', { slug: slug }) }" style="color: white"></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
        
            <div class="row-fluid">
                <div class="span12">
                    <div class="pagination pagination-centered" data-bind="with: pagination">
                        <ul data-bind="foreach: ko.utils.range(1, maxPageIndex)">
                            <li data-bind="css: { active: ($data) == $parent.page() }">
                                <a href="#" data-bind="text: $data, click: $parent.page"></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>        
            </div>
        </script>
        </div>
    </div>

{% endblock %}