{% extends 'PodcastMainBundle::layout.html.twig' %}

{% block title %}Podcast Tool{% endblock %}

{% block content %}

<div class="row-fluid">
    <div class="span2 sideBar">
        <div class="row-fluid" data-bind="with: Player">
            <div class="span12">
                <div data-bind="with: episode">
                    <div style="width:30px;" class="pull-left">
                        <img src="{{ asset('bundles/podcastmain/images/loading.gif') }}" style="width:100%;" data-bind="visible: $parent.loading()">
                    </div>
                    <p style="color: #000;font-family: 'OpenSansLight';font-size: 16px;font-weight: lighter;padding-left:10px;" data-bind="text: name"></p>
                </div>
            </div>
        </div>
        <div class="row-fluid" data-bind="with: Player">
            <div class="span2" data-bind="with: episode"> 
                <a class="btn btn-mini btn-link" data-bind="click: $parent.stop, visible: $parent.playing">
                    <i class="icon-stop"></i>
                </a>
                <a class="btn btn-mini btn-link" data-bind="click: $parent.play, visible: !$parent.playing()">
                    <i class="icon-play"></i>
                </a>
            </div>
            <div class="span10"> 
                <div class="progress progress-striped active">
                    <div class="bar" data-bind="style: { width: progress }"></div>
                    <div class="bar bar-warning" data-bind="style: { width: buffer }"></div>
                </div>
            </div>
        </div>

        <hr>
        <ul>
            <li><figure><i class='icon-home'></i> <div class='menuText'><a href='/'>Home</a></div></figure></li>
            <li><figure><i class="icon-th-large"></i> <div class="menuText"><a href='/'>Directory</a></div></figure></li>
            <li><figure><i class="icon-user"></i> <div class="menuText"><a href="#" data-toggle="modal" data-target="#myModal" data-backdrop="false">Register</a></div></figure></li>
        </ul>

        <hr>

            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                {{ 'layout.logged_in_as'|trans({'%username%': app.user.username}, 'FOSUserBundle') }} |
        <a href="{{ path('fos_user_security_logout') }}">
                    {{ 'layout.logout'|trans({}, 'FOSUserBundle') }}
            </a>
            {% else %}
                {% render("PodcastUserBundle:Security:login") %}
            {% endif %}

            <br/>

        </div>
        <div class="span10 content borBox">
            <div data-bind="template: { name: active().template(), data: active() }"></div></div>
    </div>
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <form action="{{ path('fos_user_registration_register') }}" method="POST" class="fos_user_registration_register form-horizontal" style="padding-bottom:0px; margin-bottom:0px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="myModalLabel">User registration</h3>
            </div>
            <div class="modal-body">
        {% render("PodcastUserBundle:Registration:register") %}
                </div>
                <div class="modal-footer">
                    <input type="submit" class="btn btn-primary" value="Register" />
                </div>
            </form>
        </div>
{% endblock %}